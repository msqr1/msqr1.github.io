<!doctype html><html lang=en><meta charset=UTF-8 content="width=device-width,initial-scale=1" name=viewport><title>Vosklet Demo</title><meta name="description" content="Lightweight and fast automatic speech recognition right in the browser! Available in 20 languages"><script defer src=https://cdn.jsdelivr.net/gh/msqr1/Vosklet@1.2.0/Examples/Vosklet.js crossorigin></script><link href=https://cdn.jsdelivr.net/gh/msqr1/msqr1.github.io/favicon.ico rel=icon type=image/x-icon crossorigin><style>body{font-size:1.3rem;box-sizing:border-box}button,input,select{vertical-align:middle;font-size:1rem}#loadBtn{margin-right:1.25rem}#spkBtn{text-align:center;padding:5px}#micOff,#micOn{width:1.6rem;height:1.6rem}#cacheTbl,#micOn{display:none}#info,h1,h3{text-align:center}#info{margin:0 0 3.5rem 0}#result{border:1px solid grey;width:100%;overflow-wrap:break-word;min-height:1.56rem}#result>span{color:grey}#flexbox{--gap:1.5%;justify-content:center;display:flex;flex-wrap:wrap;column-gap:var(--gap)}#flexbox>div{width:100%}@media (width > 991px){#flexbox>div{width:calc(50% - var(--gap)/ 2)}}#flexbox>div>div{margin:0 0 1.2rem 0}table{background:#000;width:100%}td{background:#fff}th{background:#d3d3d3}.delete{text-align:center}.delete:hover{background:#ffbdbd}</style><h1>Vosklet Browser ASR Demo (v1.2.0)</h1><div id=info><a href=https://github.com/msqr1/Vosklet>Github Repository</a> (Give a ðŸŒŸ if you enjoy!)</div><div id=flexbox><div><h3>Speech Recognition</h3><div><label for=langPick>Language:</label> <select id=langPick><option value=vosk-model-small-en-us-0.15_>English<option value=vosk-model-small-en-in-0.4_>Indian English<option value=vosk-model-small-cn-0.3_>Chinese<option value=vosk-model-small-ru-0.4_>Russian<option value=vosk-model-small-fr-pguyot-0.3_>French<option value=vosk-model-small-de-0.15_>German<option value=vosk-model-small-ca-0.4_>Catalan<option value=vosk-model-small-pt-0.3_>Portuguese<option value=vosk-model-small-tr-0.3_>Turkish<option value=vosk-model-small-it-0.4_>Italian<option value=vosk-model-malayalam-bigram_>Malayam<option value=vosk-model-small-es-0.42>Spanish<option value=vosk-model-small-vn-0.4>Vietnamese<option value=vosk-model-small-nl-0.22>Dutch<option value=vosk-model-small-fa-0.5>Farsi<option value=vosk-model-small-kz-0.15>Kazakh<option value=vosk-model-small-ja-0.22>Japanese<option value=vosk-model-small-hi-0.22>Hindi<option value=vosk-model-small-cs-0.4-rhasspy>Czech<option value=vosk-model-small-uz-0.22>Uzbek<option value=vosk-model-small-ko-0.22>Korean<option value=vosk-model-small-tg-0.22>Tajik</select> <button id=loadBtn>Load</button> <label for=cacheBtn>Show model cache:</label> <input autocomplete=off id=cacheBtn type=checkbox></div><div><label for=spkBtn>Toggle microphone:</label> <button id=spkBtn autocomplete=off disabled><img id=micOn src=https://cdn.jsdelivr.net/gh/msqr1/msqr1.github.io/Vosklet/micOn.svg crossorigin><img id=micOff src=https://cdn.jsdelivr.net/gh/msqr1/msqr1.github.io/Vosklet/micOff.svg crossorigin></button></div><div><label for=uploadBtn>Upload audio:</label> <input autocomplete=off id=uploadBtn type=file disabled multiple> <button id=processBtn autocomplete=off disabled>Process</button></div><div><label for=clrBtn>Result text:</label> <button id=clrBtn>Clear</button></div><div id=result><span></span></div></div><div id=cacheTbl><h3>Cached Models</h3><table><thead><tr><th>Path<th>ID<th>Delete (click)<tbody></table></div></div><script>'use strict';document.addEventListener("DOMContentLoaded",async()=>{async function t(){await u.removeEntry(this.parentNode.firstChild.textContent,{recursive:!0});c.removeChild(this.parentNode)}let c=document.getElementsByTagName("tbody")[0],D=document.getElementById("cacheTbl"),v=document.getElementById("cacheBtn"),w=document.getElementById("langPick"),n=document.getElementById("loadBtn"),k=document.getElementById("uploadBtn"),p=document.getElementById("processBtn"),g=document.getElementById("spkBtn"),
E=document.getElementById("clrBtn"),h=document.getElementById("micOn"),q=document.getElementById("micOff"),l=document.getElementById("result"),x=l.lastChild,u=await navigator.storage.getDirectory(),r=await loadVosklet(),d=new AudioContext({sinkId:{type:"none"},latencyHint:"interactive"}),y=await r.createTransferer(d,19200),z,m,b,A="",B=a=>x.textContent=` ${JSON.parse(a.detail).partial}`,C=a=>{x.textContent="";l.textContent+=` ${JSON.parse(a.detail).text}`};for await(let [a,e]of u.entries()){let f=
await (await (await e.getFileHandle("id")).getFile()).text();A+=`<tr><td>${a}</td><td>${f}</td><td class=delete>[x]</td></tr>`}c.innerHTML+=A;for(let a of document.getElementsByClassName("delete"))a.addEventListener("click",t,{once:!0});y.port.onmessage=a=>b.acceptWaveform(a.data);v.onchange=()=>D.style.display=v.checked?"block":"none";E.onclick=()=>l.textContent="";p.onclick=async()=>{for(let a of k.files){let e=await d.decodeAudioData(await a.arrayBuffer());b.acceptWaveform(e.getChannelData(0))}k.value=null};g.addEventListener("click",async()=>{z=d.createMediaStreamSource(await navigator.mediaDevices.getUserMedia({video:!1,audio:{channelCount:1}}));z.connect(y);g.onclick=async()=>{"block"==h.style.display?(h.style.display="none",q.style.display="block",await d.suspend()):(q.style.display="none",h.style.display="block",await d.resume())};g.onclick()},{once:!0});n.onclick=async()=>{"block"==h.style.display&&(h.style.display="none",q.style.display="block");await d.suspend();n.disabled=k.disabled=p.disabled=g.disabled=!0;let a=w.value,e=w.selectedOptions[0].text;var f=a.endsWith("_");f&&(a=a.slice(0,-1));f=`https://${f?"ccoreilly.github.io/vosk-browser":"msqr1.github.io/Vosklet"}/models/${a}.tar.gz`;null!=m&&(b.removeEventListener("result",C),b.removeEventListener("partialResult",B),await b.delete(false),m.delete());m=await r.createModel(f,e,a);a:{for(let F of c.childNodes)if(e==F.firstChild.textContent)break a;c.innerHTML+=`<tr><td>${e}</td><td>${a}</td><td class=delete>[x]</td></tr>`;c.lastChild.lastChild.addEventListener("click",t,{once:!0})}b=await r.createRecognizer(m,d.sampleRate);b.addEventListener("result",C);b.addEventListener("partialResult",B);n.disabled=k.disabled=p.disabled=g.disabled=!1}});</script>