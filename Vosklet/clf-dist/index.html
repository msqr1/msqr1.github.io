<!doctype html><html lang=en><meta charset=UTF-8 content="width=device-width,initial-scale=1" name=viewport><title>Vosklet Demo</title><meta name="description" content="Lightweight and fast automatic speech recognition right in the browser! Available in 20 languages"><script defer src=https://cdn.jsdelivr.net/gh/msqr1/Vosklet@ed56baa/Examples/Vosklet.js crossorigin></script><link href=https://cdn.jsdelivr.net/gh/msqr1/msqr1.github.io@d09f835/favicon.ico rel=icon type=image/x-icon crossorigin><style>body{font-size:1.3rem;box-sizing:border-box}button,input,select{vertical-align:middle;font-size:1rem}#loadBtn{margin-right:1.25rem}#spkBtn{text-align:center;padding:5px}#micOff,#micOn{width:1.6rem;height:1.6rem}#cacheTbl,#micOn{display:none}#info,h1,h3{text-align:center}#info{margin:0 0 3.5rem 0}#result{border:1px solid grey;width:100%;overflow-wrap:break-word;min-height:1.56rem}#result>span{color:grey}#flexbox{--gap:1.5%;justify-content:center;display:flex;flex-wrap:wrap;column-gap:var(--gap)}#flexbox>div{width:100%}@media (width > 991px){#flexbox>div{width:calc(50% - var(--gap)/ 2)}}#flexbox>div>div{margin:0 0 1.2rem 0}table{background:#000;width:100%}td{background:#fff}th{background:#d3d3d3}.delete{text-align:center}.delete:hover{background:#ffbdbd}</style><h1>Vosklet Browser ASR Demo (v1.2.0)</h1><div id=info><a href=https://github.com/msqr1/Vosklet>Github Repository</a> (Give a ðŸŒŸ if you enjoy!)</div><div id=flexbox><div><h3>Speech Recognition</h3><div><label for=langPick>Language:</label> <select id=langPick><option value=vosk-model-small-en-us-0.15_>English<option value=vosk-model-small-en-in-0.4_>Indian English<option value=vosk-model-small-cn-0.3_>Chinese<option value=vosk-model-small-ru-0.4_>Russian<option value=vosk-model-small-fr-pguyot-0.3_>French<option value=vosk-model-small-de-0.15_>German<option value=vosk-model-small-ca-0.4_>Catalan<option value=vosk-model-small-pt-0.3_>Portuguese<option value=vosk-model-small-tr-0.3_>Turkish<option value=vosk-model-small-it-0.4_>Italian<option value=vosk-model-malayalam-bigram_>Malayam<option value=vosk-model-small-es-0.42>Spanish<option value=vosk-model-small-vn-0.4>Vietnamese<option value=vosk-model-small-nl-0.22>Dutch<option value=vosk-model-small-fa-0.5>Farsi<option value=vosk-model-small-kz-0.15>Kazakh<option value=vosk-model-small-ja-0.22>Japanese<option value=vosk-model-small-hi-0.22>Hindi<option value=vosk-model-small-cs-0.4-rhasspy>Czech<option value=vosk-model-small-uz-0.22>Uzbek<option value=vosk-model-small-ko-0.22>Korean<option value=vosk-model-small-tg-0.22>Tajik</select> <button id=loadBtn>Load</button> <label for=cacheBtn>Show model cache:</label> <input autocomplete=off id=cacheBtn type=checkbox></div><div><label for=spkBtn>Toggle microphone:</label> <button id=spkBtn autocomplete=off disabled><img id=micOn src=https://cdn.jsdelivr.net/gh/msqr1/msqr1.github.io@b0a4918/Vosklet/micOn.svg crossorigin><img id=micOff src=https://cdn.jsdelivr.net/gh/msqr1/msqr1.github.io@b0a4918/Vosklet/micOff.svg crossorigin></button></div><div><label for=uploadBtn>Upload audio:</label> <input autocomplete=off id=uploadBtn type=file disabled multiple> <button id=processBtn autocomplete=off disabled>Process</button></div><div><label for=clrBtn>Result text:</label> <button id=clrBtn>Clear</button></div><div id=result><span></span></div></div><div id=cacheTbl><h3>Cached Models</h3><table><thead><tr><th>Path<th>ID<th>Delete (click)<tbody></table></div></div><script>'use strict';document.addEventListener("DOMContentLoaded",async()=>{async function v(){await w.delete(this.parentNode.firstChild.textContent,{ignoreSearch:!0});d.removeChild(this.parentNode)}var b=document.getElementById.bind(document);;let d=document.getElementsByTagName("tbody")[0],E=b("cacheTbl"),x=b("cacheBtn"),y=b("langPick"),r=b("loadBtn"),k=b("uploadBtn"),t=b("processBtn"),f=b("spkBtn"),F=b("clrBtn"),g=b("micOn"),u=b("micOff"),l=b("result"),z=l.lastChild,m=await loadVosklet(),w=await m.getModelCache(),e=new AudioContext({sinkId:{type:"none"},latencyHint:"interactive"}),A=await m.createTransferer(e,19200),B,n,c;b="";let C=a=>z.textContent=` ${JSON.parse(a.detail).partial}`,D=a=>{z.textContent="";l.textContent+=` ${JSON.parse(a.detail).text}`};var p=await w.keys();for(let a of p)p=a.url.split("?"),b+=`<tr><td>${p[0].split("/").pop()}</td><td>${p[1]}</td><td class=delete>[x]</td></tr>`;d.innerHTML+=b;for(let a of document.getElementsByClassName("delete"))a.addEventListener("click",v,{once:!0});A.port.onmessage=a=>c.acceptWaveform(a.data);x.onchange=()=>E.style.display=x.checked?"block":"none";F.onclick=()=>l.textContent="";t.onclick=async()=>{for(let a of k.files){let h=await e.decodeAudioData(await a.arrayBuffer());c.acceptWaveform(h.getChannelData(0))}k.value=null};f.addEventListener("click",async()=>{B=e.createMediaStreamSource(await navigator.mediaDevices.getUserMedia({video:!1,audio:{channelCount:1}}));B.connect(A);f.onclick=async()=>{"block"==g.style.display?(g.style.display="none",u.style.display="block",await e.suspend()):(u.style.display="none",g.style.display="block",await e.resume())};f.onclick()},{once:!0});r.onclick=async()=>{"block"==g.style.display&&(g.style.display="none",u.style.display="block");await e.suspend();r.disabled=k.disabled=t.disabled=f.disabled=!0;let a=y.value,h=y.selectedOptions[0].text;var q=a.endsWith("_");q&&(a=a.slice(0,-1));q=`https://${q?"ccoreilly.github.io/vosk-browser":"msqr1.github.io/Vosklet"}/models/${a}.tar.gz`;null!=n&&(c.removeEventListener("result",D),c.removeEventListener("partialResult",C),await c.delete(),n.delete());n=await m.createModel(q,h,a);a:{for(let G of d.childNodes)if(h==G.firstChild.textContent)break a;d.innerHTML+=`<tr><td>${h}</td><td>${a}</td><td class=delete>[x]</td></tr>`;d.lastChild.lastChild.addEventListener("click",v,{once:!0})}c=await m.createRecognizer(n,e.sampleRate);c.addEventListener("result",D);c.addEventListener("partialResult",C);r.disabled=k.disabled=t.disabled=f.disabled=!1}});</script>